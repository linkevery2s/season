<!DOCTYPE HTML>
<html lang="ja">
<title>歳時記を感じよう！</title>

<head prefix="og: http://ogp.me/ns# fb: http://ogp.me/ns/fb# article: http://ogp.me/ns/article#">
    <meta charset="UTF-8" name="viewport"
        content="width=device-width, initial-scale=1, maximum-scale=1, user-scalable=no">
    <meta http-equiv="X-UA-Compatible" content="IE=edge">
    <meta property="og:title" content="歳時記を感じよう！" />
    <meta property="og:url" content="https://linkevery2s.github.io/season/" />
    <meta property="og:type" content="website" />
    <meta property="og:image" content="https://linkevery2s.github.io/season/images/ogp.png" />
    <meta name="description" content="日本の歳時記を感じることのできるアプリです。日本特有の季節や年中行事、文化を学んでみましょう。" />
    <meta name="twitter:card" content="summary_large_image">
    <meta name="twitter:title" content="歳時記を感じよう！" />
    <meta name="twitter:image" content="https://linkevery2s.github.io/season/images/ogp.png" />
    <meta name="author" content="Saito Hitoshi">
    <meta name="keywords" content="日本,歳時記,四季,文化" />
    <link rel="apple-touch-icon" href="./images/apple-touch-icon.png">
    <link rel="icon" href="./images/apple-touch-icon.png">

    <!-- Tailwind -->
    <script src="https://cdn.tailwindcss.com"></script>

    <!-- Font Awesome -->
    <link rel="stylesheet" href="https://cdnjs.cloudflare.com/ajax/libs/font-awesome/6.5.1/css/all.min.css"
        integrity="sha512-DTOQO9RWCH3ppGqcWaEA1BIZOC6xxalwEsw9c2QQeAIftl+Vegovlnee1c9QX4TctnWMn13TZye+giMm8e2LwA=="
        crossorigin="anonymous" referrerpolicy="no-referrer" />
    <script src="https://cdnjs.cloudflare.com/ajax/libs/font-awesome/6.5.1/js/all.min.js"
        integrity="sha512-GWzVrcGlo0TxTRvz9ttioyYJ+Wwk9Ck0G81D+eO63BaqHaJ3YZX9wuqjwgfcV/MrB2PhaVX9DkYVhbFpStnqpQ=="
        crossorigin="anonymous" referrerpolicy="no-referrer"></script>

    <!-- jQuery -->
    <script src="https://code.jquery.com/jquery-3.7.1.min.js"
        integrity="sha256-/JqT3SQfawRcv/BIHPThkBvs0OEvtFFmqPF/lYI/Cxo=" crossorigin="anonymous"></script>

    <style>
        html,
        body,
        #main {
            margin: 0;
            padding: 0;
            width: 100%;
            height: 100%;
            z-index: 0;
        }

        #main{
            display: none;
        }

        body {
            color: #000000;
            font-family: "Source Han Serif JP", "Noto Serif CJK JP", "游明朝体", "Yu Mincho", YuMincho, serif;
            background-attachment: fixed;
            background-image: url("./images/fujisan.jpg");
            background-position: top center;
            background-repeat: no-repeat;
            background-size: cover;
            display: flex;
            justify-content: center;
        }


        /* iOS用  */
        body::before {
            content: "";
            display: block;
            position: fixed;
            top: 0;
            left: 0;
            z-index: -1;
            width: 100%;
            height: 100vh;
            background-repeat: no-repeat;
            background-position: top center;
            background-image: url("./images/fujisan.jpg");
            background-size: cover;
        }

        #header {
            position: fixed;
            padding: .7em;
            border-radius: 30px;
            z-index: 2;
            width: 90%;
            max-width: 600px;
            background: rgba(255, 255, 255, 1);
            left: 50%;
            transform: translate(-50%);
            border: 5px dotted #eb6101;

        }

        .title-icon {
            color: #eb6101;
            position: fixed;
            left: 15px;
            top: 10px;
        }

        .title-icon2 {
            color: #eb6101;
            position: fixed;
            right: 15px;
            top: 10px;
        }

        .title {
            cursor: pointer;
        }

        #img_midashi {
            display: flex;
            width: 30px;
            filter: brightness(0) saturate(100%) invert(46%) sepia(99%) saturate(3429%) hue-rotate(6deg) brightness(98%) contrast(99%);
        }

        .container {
            position: relative;
            width: 400px;
            height: 400px;
            top: 50%;
            left: 50%;
            transform: translate(-50%, -50%);
        }

        .circle {
            position: absolute;
            top: 50%;
            left: 50%;
            width: 300px;
            height: 300px;
            margin: -150px 0 0 -150px;
            border-radius: 50%;
            pointer-events: none;
            transform: rotate(var(--rotation, 0deg));
            transition: transform 0.8s ease;
        }

        .month {
            position: absolute;
            width: 80px;
            height: 80px;
            background: rgba(255, 255, 255, .9);
            font-weight: bold;
            border-radius: 50%;
            box-shadow: 0 3px 8px rgba(0, 0, 0, 0.15);
            display: flex;
            justify-content: center;
            align-items: center;
            font-size: 18px;
            cursor: pointer;
            pointer-events: auto;
            transition: transform 0.3s ease;
        }

        .center-label {
            background: rgba(255, 255, 255, .9);
            position: absolute;
            top: 50%;
            left: 50%;
            transform: translate(-50%, -50%);
            font-size: 15px;
            font-weight: bold;
            cursor: pointer;
            border-radius: 50%;
            width: 80px;
            height: 80px;
            line-height: 78px;
            border: 3px solid #eb6101;
        }

        .menu-circle {
            position: relative;
            width: 200px;
            height: 200px;
            border-radius: 50%;
            top: 50%;
            left: 50%;
            transform: translate(-50%, -50%);
        }

        .menu-circle span {
            position: absolute;
            width: 50%;
            height: 50%;
            display: flex;
            justify-content: center;
            align-items: center;
            text-decoration: none;
            color: #333;
            font-weight: bold;
            font-size: 15px;
            background: rgba(255, 255, 255, .9);
            box-sizing: border-box;
            cursor: pointer;
        }

        .menu-circle span.top-left {
            top: 0;
            left: 0;
            border-radius: 100% 0 0 0;
            background: rgba(255, 212, 255, .9);
        }

        .menu-circle span.top-right {
            top: 0;
            right: 0;
            border-radius: 0 100% 0 0;
            background: rgba(224, 235, 175, .9);
        }

        .menu-circle span.bottom-left {
            bottom: 0;
            left: 0;
            border-radius: 0 0 0 100%;
            background: rgba(160, 216, 239, .9);
        }

        .menu-circle span.bottom-right {
            bottom: 0;
            right: 0;
            border-radius: 0 0 100% 0;
            background: rgba(248, 229, 140, .9);
        }


        #overlay {
            width: 100%;
            height: 120vh;
            position: fixed;
            top: 0;
            left: 0;
            background: rgba(0, 0, 0, .8);
            display: none;
            z-index: 5;
        }

        #intro,
        #manual,
        #share {
            display: none;
            height: 80%;
            max-height: 800px;
            left: 50%;
            position: absolute;
            top: 50%;
            transform: translate(-50%, -50%);
            width: 95%;
            max-width: 600px;
            z-index: 10;
            background: #ffffff;
            border-radius: .3em;
            padding: .3em;
        }

        #closed-btn1,
        #closed-btn2,
        #closed-btn3 {
            position: absolute;
            top: 5px;
            right: 5px;
            border-radius: .3em;
            color: #ffffff;
            background: #eb6101;
            cursor: pointer;
            text-align: center;
            font-size: 13px;
        }

        #closed-btn1:hover,
        #closed-btn2:hover,
        #closed-btn3:hover {
            background: #ffffff;
            color: #eb6101;
            border: 1px solid #eb6101;
        }

        iframe {
            margin: 0;
            padding: 0;
            width: 100%;
            height: 100%;
            border: none;
            position: absolute;
            z-index: 0;
        }

        #back{
            display: none;
            position: fixed;
            z-index: 5;
            top: 0;
            right: 0;
            background: #e7e7eb;
            border: 1px solid #000000;
            border-radius: 15%;
            cursor: pointer;
        }

        #back:hover{
            background: #ffffff;
        }

        .footer {
            color: #ffffff;
            z-index: 1;
            position: fixed;
            bottom: 0;
            width: 100%;
        }

        .footer p a {
            padding-bottom: 2px;
            border-bottom: 1px dashed #ffffff;
        }
    </style>

    <link rel="manifest" href="./manifest.json">
    <script>
        if ('serviceWorker' in navigator) {
            navigator.serviceWorker.register('./service-worker.js').then(function () {
                console.log('Service Worker Registered');
            });
        }
    </script>
</head>

<body>

    <!-- header -->
    <div id="header" class="mt-3">
        <center>
            <span class="title-icon"><img src="./images/icon/fujisan.svg" id="img_midashi"></span>

            <div class="title" onclick="location.reload();"><span class="text-xl">歳時記を感じよう！</span>
            </div>

            <span class="title-icon2"><img src="./images/icon/matsushima.svg" id="img_midashi"></span>
        </center>
    </div>


    <center>
        <div class="container" id="container">
            <div class="menu-circle">
                <span class="intro top-left pl-3">はじめに</span>
                <span class="manual top-right pr-3">使い方</span>
                <span class="share bottom-left pl-2">シェア</span>
                <a href="https://docs.google.com/forms/d/e/1FAIpQLSf-WMoBJRTdA1bmN_SmQ-bsNGeLs1l737d3c9BUNuErjH-KBw/viewform"
                    target="_blank"><span class="question bottom-right pr-3">お問合せ</span></a>
            </div>
            <div class="center-label" id="centerLabel">MENU</div>
            <div class="circle" id="circle">
            </div>
        </div>
    </center>

    <!-- ポップアップ用のoverlay -->
    <div id="overlay"></div>

    <!-- はじめに -->
    <div id="intro"><span id="closed-btn1" class="py-2 px-3 text-xs">閉じる</span>
        <h3 class="text-2xl text-center"><i class="fa-solid fa-book"></i> はじめに</h3>
    </div>

    <!-- 使い方 -->
    <div id="manual"><span id="closed-btn2" class="py-2 px-3 text-xs">閉じる</span>
        <h3 class="text-2xl text-center mb-3"><i class="fa-solid fa-book"></i> 使い方</h3>

        <img src="./images/install.jpg" width="100%" class= "install" alt="インストール方法">
    </div>

    <!-- シェア -->
    <div id="share"><span id="closed-btn3" class="py-2 px-3 text-xs">閉じる</span>
        <h3 class="text-2xl text-center"><i class="fa-solid fa-book"></i> シェア</h3>
    </div>

    <!-- main contents -->
    <div id="main">
    </div>

    <!-- back button -->
    <div id="back" class="p-2 mt-3 mr-3">戻る</div>

    <!-- footer -->
    <div id="footer" class="footer pt-2 pr-4 pb-2 text-right">
        <p class="text-xs mt-1"><a href="https://github.com/linkevery2s/season" target="_blank">src on GitHub</a>.
            <i class="fa-regular fa-copyright"></i> <a href="https://hitoshi2s.netlify.app/" target="_blank">齋藤 仁志</a>.
        </p>

    </div>


    <script type="module">
        const circle = document.getElementById("circle");
        //const centerLabel = document.getElementById("centerLabel");
        const months = ["3月", "4月", "5月", "6月", "7月", "8月", "9月", "10月", "11月", "12月", "1月", "2月"];

        const main_contents = document.getElementById("main");

        const container = document.querySelector(".container");

        // 円周に12個配置
        months.forEach((m, i) => {

            const el = document.createElement("div");
            el.className = "month";
            el.textContent = m;

            const angle = (i / 12) * 2 * Math.PI;
            const r = 160; // 半径
            const x = Math.cos(angle) * r;
            const y = Math.sin(angle) * r;

            el.style.left = 150 + x - 40 + "px"; // 親の中心150px, 要素40px調整
            el.style.top = 150 + y - 40 + "px";

            el.addEventListener("click", () => selectMonth(i));
            circle.appendChild(el);

        });

        let currentIndex = 0;

        let selectMonth = (i) => {
            currentIndex = i;

            // 全ての月の色をリセット
            document.querySelectorAll('.month').forEach(m => {
                m.style.background = 'rgba(255,255,255,.9)';
                m.style.color = 'black';
            });

            // 選択した月だけ赤くする
            const target = document.querySelectorAll('.month')[i];
            target.style.background = 'rgba(255,204,204,.9)';
            target.style.color = 'red';

            let month;
            month = months[i].match(/\d+/)[0];

            main_contents.innerHTML = '<iframe src="./' + month + '.html"></iframe>';

            //container.style.display = "none";

            $('#header').hide();
            $('#footer').hide();
            $("#container").hide();
            $('#main').fadeIn();
            $("#back").fadeIn();

        }

        const back_btn = document.querySelector("#back");

        back_btn.addEventListener("click", ()=>{

            $('#main').hide();
            $("#back").hide();
            $('#header').fadeIn();
            $('#footer').fadeIn();
            $("#container").fadeIn();

        });


        const intro_btn = document.querySelector('.intro');
        const manual_btn = document.querySelector('.manual');
        const share_btn = document.querySelector('.share');

        const overlay = document.querySelector('#overlay');

        const manual = document.querySelector('#manual');
        const intro = document.querySelector('#intro');
        const share = document.querySelector('#share');

        intro_btn.addEventListener("click", () => {

            $('#overlay').fadeIn();
            $('#intro').fadeIn();

        });

        manual_btn.addEventListener("click", () => {

            $('#overlay').fadeIn();
            $('#manual').fadeIn();

        });

        share_btn.addEventListener("click", () => {

            $('#overlay').fadeIn();
            $('#share').fadeIn();

        });

        overlay.addEventListener("click", () => {

            $('#overlay').fadeOut();
            $('#intro').fadeOut();
            $('#manual').fadeOut();
            $('#share').fadeOut();

        })

        const closed_btn1 = document.querySelector("#closed-btn1");
        const closed_btn2 = document.querySelector("#closed-btn2");
        const closed_btn3 = document.querySelector("#closed-btn3");

        closed_btn1.addEventListener("click", () => {

            $('#overlay').fadeOut();
            $('#intro').fadeOut();

        });

        closed_btn2.addEventListener("click", () => {

            $('#overlay').fadeOut();
            $('#manual').fadeOut();

        });

        closed_btn3.addEventListener("click", () => {

            $('#overlay').fadeOut();
            $('#share').fadeOut();

        });



    </script>

    <!-- Google tag (gtag.js) -->
    <script async src="https://www.googletagmanager.com/gtag/js?id=G-MPP84V2NHB"></script>
    <script>
        window.dataLayer = window.dataLayer || [];
        function gtag() { dataLayer.push(arguments); }
        gtag('js', new Date());

        gtag('config', 'G-MPP84V2NHB');
    </script>
</body>

</html>